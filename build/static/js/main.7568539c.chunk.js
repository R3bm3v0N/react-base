(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{294:function(e,t,n){e.exports=n(535)},376:function(e,t,n){},465:function(e,t,n){"use strict";n.r(t),t.default={debug:!1,apiBaseURL:"https://e-msg.biz:8087"}},484:function(e,t,n){},486:function(e,t,n){},529:function(e,t,n){e.exports=n.p+"static/media/index.8f7fb547.less"},531:function(e,t,n){e.exports=n.p+"static/media/index.89f9552a.less"},535:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"login",function(){return A}),n.d(a,"loginSuccess",function(){return V}),n.d(a,"loginError",function(){return L});var r={};n.r(r),n.d(r,"fetch",function(){return je}),n.d(r,"generate",function(){return Se}),n.d(r,"insert",function(){return ke});var c={};n.r(c),n.d(c,"login",function(){return Ce}),n.d(c,"search",function(){return xe}),n.d(c,"checkEmail",function(){return Fe});var i={};n.r(i),n.d(i,"fetch",function(){return Ie});var l={};n.r(l),n.d(l,"fetch",function(){return De}),n.d(l,"fetchSuccess",function(){return Pe}),n.d(l,"fetchError",function(){return $e}),n.d(l,"insert",function(){return _e}),n.d(l,"insertSuccess",function(){return Ke}),n.d(l,"insertError",function(){return Ae});var o={};n.r(o),n.d(o,"default",function(){return St});var s={};n.r(s),n.d(s,"default",function(){return kt});n(295);var u=n(0),d=n(9),m=(n(302),n(283)),p=n(30),f=n(31),h=n(34),g=n(32),b=n(35),E=n(80),y=n(284),v=n.n(y),O=n(107),w=n(84),j=n(289),S=(n(308),n(130)),k=(n(215),n(67)),C=(n(132),n(7)),x=(n(315),n(97)),F=x.a.Header,I=x.a.Content,R=x.a.Sider,N=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={collapsed:!1},n.toggle=function(){n.setState({collapsed:!n.state.collapsed})},n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return u.createElement(x.a,null,u.createElement(R,{width:200,trigger:null,collapsible:!0,collapsed:this.state.collapsed},u.createElement("div",{className:"logo"}),u.createElement(k.b,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"]},u.createElement(k.b.Item,{key:"1"},u.createElement(C.a,{type:"key"}),u.createElement("span",null,"\u30e9\u30a4\u30bb\u30f3\u30b9\u7ba1\u7406")),u.createElement(k.b.Item,{key:"2"},u.createElement(C.a,{type:"setting"}),u.createElement("span",null,"\u8a2d\u5b9a")))),u.createElement(x.a,null,u.createElement(F,{style:{background:"#fff",padding:0}},u.createElement(C.a,{className:"trigger",type:this.state.collapsed?"menu-unfold":"menu-fold",onClick:this.toggle})),u.createElement(x.a,{style:{padding:"0 24px 24px"}},u.createElement(S.a,{style:{margin:"16px 0"}},u.createElement(S.a.Item,null,"Home"),u.createElement(S.a.Item,null,"List"),u.createElement(S.a.Item,null,"App")),u.createElement(I,{style:{background:"#fff",padding:24,margin:0,minHeight:280}},this.props.children))))}}]),t}(u.Component),T=n(115),D=function(e){var t=e.layout,n=void 0===t?N:t,a=e.component,r=e.store,c=e.permissions,i=void 0===c?[]:c,l=Object(j.a)(e,["layout","component","store","permissions"]),o=(r.getState().session,(new T.a).get("jwt"));console.log("jwtjwtjwt",o);var s=!i.length||o&&o.length;return u.createElement(w.b,Object.assign({},l,{render:function(e){return s?u.createElement(n,null,u.createElement(a,e)):u.createElement(w.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},P=(n(230),n(96)),$=(n(231),n(68)),_=n(41),K="".concat("LOGIN","/LOGIN"),A=("".concat("LOGIN","/LOGOUT"),Object(_.a)("".concat(K,"_START"),function(e){return function(t,n){return e({username:t,password:n})}})),V=Object(_.a)("".concat(K,"_SUCCESS"),function(e){return function(t){return e(t)}}),L=Object(_.a)("".concat(K,"_ERROR"),function(e){return function(t){return e(t)}}),B=n(44),z=Object(E.b)(function(e,t){return{loggedIn:null!=e.session.jwt}},function(e){return Object(B.b)(a,e)}),M=(n(75),n(25)),U=(n(232),n(81)),q=(n(192),n(23)),G=(n(103),n(59)),Y=(n(373),n(271)),H=(n(233),n(167)),J=Object(E.b)(function(e,t){return{loginPending:"pending"===e.page.login.status,error:e.page.login.error}},function(e){return Object(B.b)(a,e)}),Q=(n(376),function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(e,t){if(!e){console.log("Received values of form: ",t);var a=t.username,r=t.password;n.props.login(a,r)}})},n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,n=t.error,a=t.loginPending;return u.createElement(q.a,{onSubmit:this.handleSubmit,className:"login-form"},n&&u.createElement(Y.a,{message:u.createElement(u.Fragment,null,n.code&&u.createElement(H.a.Text,{code:!0},n.code)," ",n.message),type:"error",style:{marginBottom:24},showIcon:!0}),u.createElement(q.a.Item,null,e("username",{rules:[{required:!0,message:"\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"}]})(u.createElement(G.a,{disabled:a,prefix:u.createElement(C.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u30e6\u30fc\u30b6\u30fc\u540d"}))),u.createElement(q.a.Item,null,e("password",{rules:[{required:!0,message:"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"}]})(u.createElement(G.a.Password,{disabled:a,prefix:u.createElement(C.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u30d1\u30b9\u30ef\u30fc\u30c9"}))),u.createElement(q.a.Item,null,e("remember",{valuePropName:"checked",initialValue:!0})(u.createElement(U.a,{disabled:a},"\u30ed\u30b0\u30a4\u30f3\u72b6\u614b\u3092\u4fdd\u6301\u3059\u308b")),u.createElement(M.a,{loading:a,type:"primary",htmlType:"submit",className:"login-form-button"},"\u30ed\u30b0\u30a4\u30f3")))}}]),t}(u.Component)),W=J(q.a.create({name:"normal_login"})(Q)),X=z(function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return this.props.loggedIn?u.createElement(w.a,{to:"/"}):u.createElement(P.a,null,u.createElement($.a,{span:12,offset:6},u.createElement(W,null)))}}]),t}(u.Component)),Z=(n(430),n(286)),ee=(n(432),n(285)),te=(n(439),n(212)),ne=(n(441),n(174)),ae=n(71),re=(n(536),n(274)),ce=(n(243),n(158)),ie=(n(244),n(170)),le=(n(245),n(85)),oe=n(18),se=n.n(oe),ue=n(272),de=n(38),me=n(27),pe=n.n(me),fe=n(13),he=n.n(fe),ge=n(207),be=n.n(ge),Ee=n(464);console.log("process.env",Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_NODE_ENV:"prod"}));var ye=Ee({},n(465).default);ye.debug&&(n(466),localStorage.debug="axios");var ve,Oe=be.a.create({baseURL:ye.apiBaseURL,timeout:6e4,headers:{Authentication:(new T.a).get("jwt")}}),we=n(157),je=function(){var e=Object(de.a)(se.a.mark(function e(t){var n;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,Oe.get("/license".concat(we.stringify(t,{addQueryPrefix:!0})));case 3:return n=e.sent,e.abrupt("return",n.data.payload);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=Object(de.a)(se.a.mark(function e(t){var n;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.post("/license/generate",t);case 2:return n=e.sent,e.abrupt("return",n.data.payload);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(de.a)(se.a.mark(function e(t){var n;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.post("/license",t);case 2:return n=e.sent,e.abrupt("return",n.data.payload);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(de.a)(se.a.mark(function e(t,n){var a;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.post("/login",{email:t,password:n});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),xe=function(){var e=Object(de.a)(se.a.mark(function e(t){var n;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.get("/user",{params:{keyword:t,limit:10}});case 2:return n=e.sent,e.abrupt("return",n.data.payload);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(de.a)(se.a.mark(function e(t){var n;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.get("/user/check-email-exists",{params:{email:t}});case 2:return n=e.sent,e.abrupt("return",n.data.payload);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(de.a)(se.a.mark(function e(t){var n;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,Oe.get("/device".concat(we.stringify(t,{addQueryPrefix:!0})));case 3:return n=e.sent,e.abrupt("return",n.data.payload);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Re={license:r,user:c,device:i},Ne="".concat("LICENSE","/FETCH"),Te="".concat("LICENSE","/INSERT"),De=("".concat("LICENSE","/UPDATE"),"".concat("LICENSE","/DELETE"),Object(_.a)("".concat(Ne,"_START"),function(e){return function(t,n){return e({username:t,password:n})}})),Pe=Object(_.a)("".concat(Ne,"_SUCCESS"),function(e){return function(t){return e(t)}}),$e=Object(_.a)("".concat(Ne,"_ERROR"),function(e){return function(t){return e(t)}}),_e=Object(_.a)("".concat(Te,"_START"),function(e){return function(t){return e(t)}}),Ke=Object(_.a)("".concat(Te,"_SUCCESS"),function(e){return function(t){return e(t)}}),Ae=Object(_.a)("".concat(Te,"_ERROR"),function(e){return function(t){return e(t)}}),Ve=Object(E.b)(function(e,t){return{fetch:e.page.license.fetch,insert:e.page.license.insert}},function(e){return Object(B.b)(l,e)}),Le=(n(240),n(51)),Be=(n(265),n(128)),ze=n(112),Me=n.n(ze),Ue={name:void 0,dateFrom:void 0,dateTo:void 0,type:void 0,enabled:void 0},qe=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(h.a)(this,Object(g.a)(t).call(this,e))).state=Ue,n.handleSearch=function(e){e.preventDefault(),n.props.form.validateFields(function(e,t){console.log("Received values of form: ",t)})},n.handleFilterOnChangeName=function(e){var t=e.target.value;n.setState({name:t},n.triggerFilter)},n.handleFilterOnChangeDateFrom=function(e){n.setState({dateFrom:e?e.format("Y/MM/DD"):void 0},n.triggerFilter)},n.handleFilterOnChangeDateTo=function(e){n.setState({dateTo:e?e.format("Y/MM/DD"):void 0},n.triggerFilter)},n.handleFilterOnChangeType=function(e){var t=e.target.value;n.setState({type:t},n.triggerFilter)},n.handleFilterOnChangeEnable=function(e){var t=e.target.value;n.setState({enabled:t},n.triggerFilter)},n.triggerFilter=function(){n.props.onFilterChangePrepare(),n.triggerFilterNow()},n.triggerFilterNow=function(){console.log("triggerFilterNow"),n.props.onFilterChange(n.state)},n.handleReset=function(){n.props.form.resetFields(null,{triggerOnChange:!0}),n.setState(Ue,n.triggerFilter)},n.triggerFilterNow=Me()(n.triggerFilterNow,500),n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=JSON.stringify(Ue)===JSON.stringify(this.state);return u.createElement(q.a,{layout:"inline",className:"ant-advanced-search-form",onSubmit:this.handleSearch},u.createElement(q.a.Item,null,e("customer")(u.createElement(G.a,{onChange:this.handleFilterOnChangeName,placeholder:"\u304a\u5ba2\u69d8\u540d",style:{width:135},suffix:u.createElement(C.a,{type:"edit",style:{color:"rgba(0,0,0,.25)"}})}))),u.createElement(q.a.Item,null,e("dateFrom")(u.createElement(Be.a,{onChange:this.handleFilterOnChangeDateFrom,placeholder:"\u6709\u52b9\u6642\u9593\uff08\u7d42\uff09",style:{width:135}}))),u.createElement(q.a.Item,null,u.createElement("span",{style:{display:"inline-block",textAlign:"center"}},"\uff5e")),u.createElement(q.a.Item,null,e("dateTo")(u.createElement(Be.a,{onChange:this.handleFilterOnChangeDateTo,placeholder:"\u6709\u52b9\u6642\u9593\uff08\u59cb\uff09",style:{width:135}}))),u.createElement(q.a.Item,null,e("type",{initialValue:void 0})(u.createElement(Le.a.Group,{onChange:this.handleFilterOnChangeType},u.createElement(Le.a.Button,{value:void 0},"\u5168\u3066"),u.createElement(Le.a.Button,{value:1},"\u500b\u4eba"),u.createElement(Le.a.Button,{value:2},"\u6cd5\u4eba")))),u.createElement(q.a.Item,null,e("enabled",{initialValue:void 0})(u.createElement(Le.a.Group,{onChange:this.handleFilterOnChangeEnable},u.createElement(Le.a.Button,{value:void 0},"\u5168\u3066"),u.createElement(Le.a.Button,{value:1},"\u6709\u52b9"),u.createElement(Le.a.Button,{value:0},"\u7121\u52b9")))),!t&&u.createElement(q.a.Item,null,u.createElement(M.a,{type:"link",style:{marginLeft:8},onClick:this.handleReset},u.createElement(C.a,{type:"close-circle"})," \u30ea\u30bb\u30c3\u30c8")))}}]),t}(u.Component),Ge=q.a.create({name:"advanced_search"})(qe),Ye=(n(480),n(288)),He=(n(482),n(290)),Je=(n(178),n(72)),Qe=(n(202),n(55)),We=(n(484),Be.a.RangePicker),Xe=q.a.create({name:"form_in_modal"})(function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(h.a)(this,Object(g.a)(t).call(this,e))).form=u.createRef(),n.state={newKeyPending:!1,customers:[],customerId:void 0,customerSearchPending:!1,customerEmailDataSource:[],customerEmailValidateStatus:void 0,customerEmailValidateError:void 0},n.handleGenerateNewKey=function(){n.setState({newKeyPending:!0},Object(de.a)(se.a.mark(function e(){var t;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.license.generate({});case 3:t=e.sent,n.setState({newKeyPending:!1},function(){n.props.form.setFieldsValue({key:t})}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.setState({newKeyPending:!1},function(){return le.a.error(e.t0.message)});case 10:case"end":return e.stop()}},e,null,[[0,7]])})))},n.handleLoadCustomer=function(e){n.setState({customerSearchPending:!0},Object(de.a)(se.a.mark(function t(){var a;return se.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Re.user.search(e);case 3:a=t.sent,n.setState({customerSearchPending:!1,customers:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n.setState({customerSearchPending:!1},function(){return le.a.error(t.t0.message)});case 10:case"end":return t.stop()}},t,null,[[0,7]])})))},n.handleCustomerChange=function(e){console.log(e),n.setState({customerId:e})},n.handleChangeCustomerEmail=function(e){n.setState({customerEmailDataSource:!e||e.indexOf("@")>=0?[]:["".concat(e,"@gmail.com"),"".concat(e,"@yahoo.com"),"".concat(e,"@hotmail.com"),"".concat(e,"@outlook.com"),"".concat(e,"@yahoo.co.jp")]},function(){e?n.checkCustomerEmail(e):n.setState({customerEmailValidateStatus:"",customerEmailValidateError:""})})},n.checkCustomerEmail=function(e){try{n.setState({customerEmailValidateStatus:"validating"},Object(de.a)(se.a.mark(function t(){var a;return se.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Re.user.checkEmail(e);case 2:a=t.sent,n.setState({customerEmailValidateStatus:a?"error":"success",customerEmailValidateError:a?"\u30e1\u30fc\u30eb\u304c\u5b58\u5728\u3057\u307e\u3059\u3002":""});case 4:case"end":return t.stop()}},t)})))}catch(t){n.setState({customerEmailValidateStatus:"error",customerEmailValidateError:t.message},function(){return le.a.error(t.message)})}},n.checkCustomerEmail=Me()(n.checkCustomerEmail,800),n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.insertPending,n=this.state.customers.map(function(e){return u.createElement(Qe.a.Option,{key:e.id},e.name," - ",u.createElement(H.a.Text,{type:"secondary"},e.email))});return n.push(u.createElement(Qe.a.Option,{key:"null"},u.createElement(C.a,{type:"plus",style:{marginRight:5}}),"\u65b0\u898f\u8ffd\u52a0")),u.createElement(q.a,{layout:"vertical",ref:this.form},u.createElement(q.a.Item,{label:"\u30e9\u30a4\u30bb\u30f3\u30b9\u30ad\u30fc"},e("key",{rules:[{required:!0,message:"\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"}]})(u.createElement(G.a,{readOnly:!0,disabled:t,placeholder:"########-########-########-########",suffix:u.createElement(Je.a,{title:"\u65b0\u898f\u30e9\u30a4\u30bb\u30f3\u30b9\u30ad\u30fc\u3092\u751f\u6210\u3059\u308b\u3002"},u.createElement(M.a,{style:{padding:0,margin:0,display:"inline"},type:"link",disabled:t||this.state.newKeyPending,onClick:this.handleGenerateNewKey},u.createElement(C.a,{type:"sync",spin:this.state.newKeyPending})))}))),u.createElement(q.a.Item,{label:"\u6709\u52b9\u6642\u9593"},e("time",{rules:[{required:!0,message:"\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"}]})(u.createElement(We,{disabled:t,style:{width:"100%"}}))),u.createElement(q.a.Item,{label:"\u304a\u5ba2\u69d8"},e("customerId",{rules:[{required:!0,message:"\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"}]})(u.createElement(Qe.a,{showSearch:!0,allowClear:!0,placeholder:"\u304a\u5ba2\u69d8\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002",style:this.props.style,defaultActiveFirstOption:!1,filterOption:!1,onSearch:this.handleLoadCustomer,onChange:this.handleCustomerChange,notFoundContent:null,loading:this.state.customerSearchPending},n))),"null"===this.state.customerId&&u.createElement(q.a.Item,{style:{padding:10,background:"#ebebeb",borderRadius:4}},u.createElement(q.a.Item,{label:"\u304a\u5ba2\u69d8\u540d"},e("customerName",{rules:[{required:!0,message:"\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"}]})(u.createElement(G.a,{disabled:t,placeholder:"\u4f8b\uff1a\u592a\u90ce\u69d8",suffix:u.createElement(C.a,{type:"edit",style:{color:"rgba(0, 0, 0, 0.25)"}})}))),u.createElement(q.a.Item,{label:"\u304a\u5ba2\u69d8\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9",hasFeedback:!0,validateStatus:this.state.customerEmailValidateStatus,help:this.state.customerEmailValidateError},e("customerEmail",{rules:[{required:!0,message:"\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"},{required:!0,message:"\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"}]})(u.createElement(He.a,{disabled:t,dataSource:this.state.customerEmailDataSource,onChange:this.handleChangeCustomerEmail,placeholder:"\u4f8b\uff1atarokun@gmail.com"},u.createElement(G.a,{suffix:null===this.state.customerEmailValidateStatus&&u.createElement(C.a,{type:"edit",style:{color:"rgba(0, 0, 0, 0.25)"}})}))))),u.createElement(q.a.Item,{style:{marginBottom:0}},u.createElement(q.a.Item,{label:"\u6700\u5927\u9867\u5ba2\u6570",style:{display:"inline-block",width:"50%",marginBottom:0}},e("maxClient",{initialValue:1,rules:[{required:!0,message:"\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"}]})(u.createElement(Ye.a,{placeholder:"\u6700\u5927\u9867\u5ba2\u6570",min:1,max:1e4}))),u.createElement(q.a.Item,{label:"\u6709\u52b9",labelAlign:"right",className:"patch-align-right",style:{display:"inline-block",width:"50%",textAlign:"right",marginBottom:0}},e("type",{initialValue:!0})(u.createElement(ce.a,{disabled:t,defaultChecked:!0})))))}}]),t}(u.Component)),Ze=(n(486),n(487).CopyToClipboard),et=Ve(function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={modal:{visible:!1},table:{meta:{page:{current:1,total:0,size:5},sort:{column:void 0,direction:void 0},filters:{}},data:[],fetching:!1,expandedRowKeys:new Set,fetchingRowKeys:new Set,visibleRowKeys:new Set}},n.fetchTableData=Object(de.a)(se.a.mark(function e(){return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.setState(pe()(n.state,{table:{fetching:{$set:!0},expandedRowKeys:{$set:new Set}}}),Object(de.a)(se.a.mark(function e(){var t;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re.license.fetch(Object(ue.a)({},n.state.table.meta));case 2:t=e.sent,n.setState(pe()(n.state,{table:{meta:{page:{total:{$set:t.meta.total}}},data:{$set:t.data},fetching:{$set:!1}}}));case 4:case"end":return e.stop()}},e)})));case 1:case"end":return e.stop()}},e)})),n.handleCopy=function(e){},n.meta=[{title:"\u30e9\u30a4\u30bb\u30f3\u30b9\u30ad\u30fc",dataIndex:"key",render:function(e,t){var a=n.state.table.visibleRowKeys.has(t.key);return u.createElement(u.Fragment,null,u.createElement("span",{style:{minWidth:280,display:"inline-block"}},a?e:("#".repeat(8)+"-").repeat(3)+e.slice(-8)),"\u3000",u.createElement(M.a,{style:{marginRight:5},shape:"circle",size:"small",icon:a?"eye":"eye-invisible",onClick:function(){return n.handleToggleKeyVisible(t)}}),u.createElement(Ze,{text:e,onCopy:function(){return le.a.success("\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u306b\u30b3\u30d4\u30fc\u3002")}},u.createElement(M.a,{shape:"circle",size:"small",icon:"copy"})))}},{title:"\u958b\u59cb\u65e5",dataIndex:"created_at",render:function(e,t){return u.createElement(u.Fragment,null,he()(e).format("Y/MM/DD"))}},{title:"\u6709\u52b9\u671f\u9650",dataIndex:"expire",render:function(e,t){return u.createElement(u.Fragment,null,he()(e).format("Y/MM/DD"))}},{title:"\u304a\u5ba2\u69d8\u540d",dataIndex:"name",render:function(e,t){return u.createElement(u.Fragment,null,u.createElement(ie.a,{color:1===t.type?"geekblue":"green"},{1:"\u500b\u4eba",2:"\u6cd5\u4eba"}[t.type]),e)}},{title:"\u30c7\u30d0\u30a4\u30b9",dataIndex:"device_count",render:function(e,t){return u.createElement(u.Fragment,null,t.device_count,"\u4ef6\u3000",t.device_count>0&&u.createElement("span",{className:"ant-table-row-expand-icon ant-table-row-".concat(n.state.table.expandedRowKeys.has(t.key)?"expanded":"collapsed"),onClick:function(){return n.handleExpand(t)}}))}},{title:"\u72b6\u614b",dataIndex:"enabled",render:function(e,t){return u.createElement(re.a,{title:"Are you sure\uff1f",okText:"Yes",cancelText:"No",onConfirm:function(){}},u.createElement(ce.a,{size:"small",checked:t.enabled}))}}],n.handleExpand=function(){var e=Object(de.a)(se.a.mark(function e(t){var a,r,c,i;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.state.table.expandedRowKeys,(r=a.has(t.key))?a.delete(t.key):a.add(t.key),n.setState(pe()(n.state,{table:{expandedRowKeys:{$set:a}}})),r||t.devices){e.next=10;break}return e.next=7,Re.device.fetch({license_key:t.key});case 7:c=e.sent,i=n.state.table.data.findIndex(function(e){return e.key===t.key}),n.setState(pe()(n.state,{table:{data:Object(ae.a)({},i,{devices:{$set:c}})}}));case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handleToggleKeyVisible=function(e){var t=n.state.table.visibleRowKeys;t.has(e.key)?t.delete(e.key):t.add(e.key),n.setState(pe()(n.state,{table:{visibleRowKeys:{$set:t}}}))},n.showModal=function(){n.setState(pe()(n.state,{modal:{visible:{$set:!0}}}))},n.hideModal=function(){n.setState(pe()(n.state,{modal:{visible:{$set:!1}}}))},n.addNewForm=u.createRef(),n.handleCreate=function(){n.addNewForm.current.validateFields(function(e,t){e||("null"===t.customerId&&(t.customerId=null),n.props.insert(t))})},n.handleTableChange=function(e,t,a){n.setState(pe()(n.state,{table:{meta:{page:{$set:{current:e.current,size:e.pageSize,total:e.total}},sort:{$set:a},filters:{$set:t}}}}))},n.handleOnFilterChangePrepare=function(){n.setState(pe()(n.state,{table:{fetching:{$set:!0}}}))},n.handleOnFilterChange=function(e){n.setState(pe()(n.state,{table:{meta:{filters:{$set:e}}}}),n.fetchTableData)},n.handleOnPageChange=function(e,t){console.log("page",e,t),n.setState(pe()(n.state,{table:{meta:{page:{current:{$set:e},size:{$set:t||0}}}}}),n.fetchTableData)},n.renderDevicesSkeleton=function(){return u.createElement(P.a,{style:{width:"100%"}},u.createElement($.a,{span:10},u.createElement(ne.a,{active:!0,loading:!0,title:!1,paragraph:{rows:2,width:["80%","80%"]}})),u.createElement($.a,{span:10},u.createElement(ne.a,{active:!0,loading:!0,title:!1,paragraph:{rows:2,width:["80%","80%"]}})),u.createElement($.a,{span:4},u.createElement("div",{style:{float:"right",width:"80%"}},u.createElement(ne.a,{active:!0,loading:!0,title:!1,paragraph:{rows:2,width:["100%","100%"]}}))))},n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.fetchTableData()}},{key:"componentDidUpdate",value:function(e){var t=this.addNewForm;"pending"===e.insert.status&&("success"===this.props.insert.status?(le.a.success("\u30c7\u30fc\u30bf\u3092\u8ffd\u52a0\u3057\u305f\u3002"),t.current.resetFields(),this.hideModal()):le.a.error("\u30c7\u30fc\u30bf\u306e\u8ffd\u52a0\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002"))}},{key:"render",value:function(){var e=this,t="pending"===this.props.insert.status,n=this.state,a=n.table,r=n.modal,c=Array.from(a.expandedRowKeys),i=a.meta.page,l=i.current,o=i.size,s=i.total;return u.createElement(P.a,null,u.createElement($.a,{span:24},u.createElement(P.a,null,u.createElement(M.a,{icon:"plus",onClick:this.showModal,type:"primary",style:{marginBottom:16,float:"right"}},"\u65b0\u898f\u8ffd\u52a0"),u.createElement(Ge,{onFilterChangePrepare:this.handleOnFilterChangePrepare,onFilterChange:this.handleOnFilterChange})),u.createElement("div",{className:"search-result-list"},u.createElement(ee.a,{dataSource:a.data,pagination:{current:l,pageSize:o,total:s,position:"both",showSizeChanger:!0,pageSizeOptions:["5","10","20","50","100"],style:{width:"100%",textAlign:"right"},showTotal:function(e,t){return u.createElement("div",null,"\u7dcf\u30a2\u30a4\u30c6\u30e0\u6570\uff1a",e," (\u8868\u793a",t.join("\u301c"),")")},onChange:this.handleOnPageChange,onShowSizeChange:this.handleOnPageChange},rowKey:function(e){return e.key},loading:a.fetching,columns:this.meta,onChange:this.handleTableChange,expandedRowKeys:c,expandIconAsCell:!1,expandIcon:function(){return u.createElement(u.Fragment,null)},expandedRowRender:function(t){return t.devices&&t.devices.length?u.createElement(te.a,{size:"small",dataSource:t.devices,renderItem:function(e,t){return u.createElement(te.a.Item,{key:t},u.createElement(P.a,{style:{width:"100%"}},u.createElement($.a,{span:10},t+1,".\xa0",e.info),u.createElement($.a,{span:10},e.id),u.createElement($.a,{span:4},u.createElement("span",{style:{float:"right"}},he()(e.created_at).format("Y/MM/DD"),"\u306b\u6d3b\u6027\u5316"))))}}):e.renderDevicesSkeleton()}}))),u.createElement(Z.a,{visible:r.visible,title:"\u65b0\u898f\u30e9\u30a4\u30bb\u30f3\u30b9\u30ad\u30fc\u3092\u8ffd\u52a0",okText:"\u8ffd\u52a0",onCancel:this.hideModal,onOk:this.handleCreate,confirmLoading:t,cancelButtonProps:{disabled:t},closable:!t,maskClosable:!t},u.createElement(Xe,{ref:this.addNewForm,insertPending:"pending"===this.props.insert.status})))}}]),t}(u.Component)),tt=(n(529),function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={user:"0"},n.handleOnClick=function(){n.props.login("aaa","bbb")},n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return u.createElement("div",null,u.createElement("div",{className:"imgBlock"},u.createElement("img",{src:"https://gw.alipayobjects.com/zos/rmsportal/KpnpchXsobRgLElEozzI.svg",alt:"img"})),u.createElement("div",{className:"content"},u.createElement("h1",null,"404"),u.createElement("div",{className:"desc"},"Page not found"),u.createElement("div",null,u.createElement(O.b,{to:"/"},"Back to home"))))}}]),t}(u.Component)),nt=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return u.createElement(u.Fragment,null,this.props.children)}}]),t}(u.Component),at=n(129),rt=n(538),ct=n(278),it=n.n(ct),lt=A,ot=V,st=L,ut={status:void 0,error:void 0},dt=Object(_.b)(ut,function(e){return[e(lt,function(e,t){return pe()(e,{status:{$set:"pending"},error:{$set:void 0}})}),e(ot,function(e,t){return pe()(e,{status:{$set:"success"},error:{$set:void 0}})}),e(st,function(e,t){return pe()(e,{status:{$set:"error"},error:{$set:t.payload}})})]}),mt=De,pt=Pe,ft=$e,ht=_e,gt=Ke,bt=Ae,Et={fetch:{status:void 0},insert:{status:void 0}},yt=Object(_.b)(Et,function(e){return[e(mt,function(e,t){return pe()(e,{fetch:{status:{$set:"pending"}}})}),e(pt,function(e,t){return pe()(e,{fetch:{status:{$set:"success"}}})}),e(ft,function(e,t){return pe()(e,{fetch:{status:{$set:"error"},error:{$set:t.payload}}})}),e(ht,function(e,t){return pe()(e,{insert:{status:{$set:"pending"}}})}),e(gt,function(e,t){return pe()(e,{insert:{status:{$set:"success"}}})}),e(bt,function(e,t){return pe()(e,{insert:{status:{$set:"error"},error:{$set:t.payload}}})})]}),vt={jwt:void 0,email:void 0,userDisplayName:void 0},Ot=Object(_.b)(vt,function(e){return[e(V,function(e,t){var n=t.payload;return(new T.a).set("jwt",n.jwt,{path:"/",httpOnly:!0}),{jwt:n.jwt,email:n.email,userDisplayName:n.userDisplayName}})]}),wt=Object(B.c)({session:Ot,page:Object(B.c)({login:dt,license:yt})}),jt=n(539),St=Object(ae.a)({},"".concat(K,"_START"),{api:function(e){return Re.user.login(e.username,e.password)},success:function(e){return V(e)},error:function(e){return L(e)}}),kt=(ve={},Object(ae.a)(ve,"".concat(Ne,"_START"),{api:function(e){return Re.license.fetch(e)},success:function(e){return Pe(e)},error:function(e){return $e(e)}}),Object(ae.a)(ve,"".concat(Te,"_START"),{api:function(e){return Re.license.insert(e)},success:function(e){return Pe(e)},error:function(e){return $e(e)}}),ve),Ct=n(287),xt=n(282),Ft=n(280),It=n(281),Rt=n(537),Nt=n(279),Tt=function(e){return Object.keys(e.default).map(function(t){return function(n){return n.pipe(Object(Nt.a)(t),Object(Ft.a)(function(n){return Object(Ct.a)(e.default[t].api(n.payload)).pipe(Object(It.a)(function(n){var a=n.data;if(a.success)return e.default[t].success(a.payload);throw a.error}),Object(Rt.a)(function(n){return Object(xt.a)(e.default[t].error(n))}))}))}})},Dt=jt.a.apply(void 0,Object(at.a)(Tt(o)).concat(Object(at.a)(Tt(s)))),Pt=Object(rt.a)(),$t=Object(B.d)(wt,B.a.apply(void 0,Object(at.a)([Pt,ye.debug&&it.a].filter(function(e){return e}))));Pt.run(Dt);var _t=$t,Kt=(n(530),n(531),function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return u.createElement(E.a,{store:_t},u.createElement(m.a,{locale:v.a},u.createElement(O.a,null,u.createElement(w.d,null,u.createElement(D,{path:"/",exact:!0,component:et,store:_t,permissions:["license.manager"]}),u.createElement(D,{path:"/login",exact:!0,component:X,layout:nt,store:_t}),u.createElement(D,{component:tt,store:_t,layout:nt})))))}}]),t}(u.Component));Object(d.render)(u.createElement(Kt,null),document.getElementById("root"))}},[[294,1,2]]]);
//# sourceMappingURL=main.7568539c.chunk.js.map